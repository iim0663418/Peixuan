# P1 Architecture Refactoring å¯¦æ–½è¦åŠƒåˆ†æ

## æŠ€è¡“å¯è¡Œæ€§è©•ä¼°

### 1. è¨­è¨ˆç³»çµ±ç¾æ³
âœ… **å„ªå‹¢**:
- å®Œæ•´çš„ design-tokens.css (166 å€‹è®Šæ•¸)
- çµ±ä¸€çš„ CSS è®Šæ•¸å‘½åè¦ç¯„
- æ·±è‰²æ¨¡å¼å®Œæ•´æ”¯æ´
- å·¥å…·é¡åˆ¥ç³»çµ±å·²å»ºç«‹

âš ï¸ **é™åˆ¶**:
- Element Plus çµ„ä»¶æ¨£å¼è¦†è“‹è¤‡é›œåº¦é«˜
- 32 å€‹çµ„ä»¶å„è‡ªç¨ç«‹çš„ scoped styles
- ç¡¬ç·¨ç¢¼å€¼åˆ†æ•£åœ¨ä¸åŒå±¤ç´š (inline, scoped, global)

### 2. Element Plus æ•´åˆæŒ‘æˆ°
```vue
<!-- ç¾æ³: åˆ†æ•£çš„æ¨£å¼è¦†è“‹ -->
:deep(.el-button--primary) { background: #d2691e; }
:deep(.el-descriptions-item__label) { color: #8b4513; }

<!-- ç›®æ¨™: çµ±ä¸€çš„è¨­è¨ˆç³»çµ± -->
:deep(.el-button--primary) { background: var(--primary-color); }
```

**é¢¨éšªè©•ä¼°**:
- ğŸ”´ **é«˜é¢¨éšª**: Element Plus ç‰ˆæœ¬å‡ç´šå¯èƒ½ç ´å£è‡ªå®šç¾©æ¨£å¼
- ğŸŸ¡ **ä¸­é¢¨éšª**: CSS ç‰¹ç•°æ€§è¡çª (scoped vs :deep)
- ğŸŸ¢ **ä½é¢¨éšª**: è¨­è¨ˆ token æ›¿æ› (å‘å¾Œç›¸å®¹)

## å¯¦æ–½ç­–ç•¥çŸ©é™£

### Phase 1: è¨­è¨ˆ Token è£œå¼· (30 åˆ†é˜)
```css
/* æ–°å¢ç¼ºå¤±çš„ alpha è®Šé«” */
--error-alpha-10: rgba(220, 53, 69, 0.1);
--purple-alpha-15: rgba(153, 50, 204, 0.15);
--brand-brown-alpha-10: rgba(139, 69, 19, 0.1);
```

### Phase 2: P0 çµ„ä»¶é‡æ§‹ (2-3 å°æ™‚)
**AppHeader.vue** â†’ **UnifiedView.vue** â†’ **DailyReminderCard.vue**

**å¯¦æ–½æ¨¡å¼**:
1. å‚™ä»½åŸå§‹æ¨£å¼ (Git branch)
2. é€è¡Œæ›¿æ›ç¡¬ç·¨ç¢¼å€¼
3. è¦–è¦ºå›æ­¸æ¸¬è©¦ (staging éƒ¨ç½²)
4. æ·±è‰²æ¨¡å¼é©—è­‰

### Phase 3: Element Plus çµ±ä¸€ (3-4 å°æ™‚)
**åˆ†éšæ®µæ•´åˆ**:
- Stage 1: el-button, el-card, el-form-item (é«˜é »ä½¿ç”¨)
- Stage 2: el-descriptions, el-tag, el-alert (ä¸­é »ä½¿ç”¨)  
- Stage 3: å…¶é¤˜çµ„ä»¶ (ä½é »ä½¿ç”¨)

## é¢¨éšªç·©è§£ç­–ç•¥

### 1. æŠ€è¡“é¢¨éšª
```bash
# è¦–è¦ºå›æ­¸æª¢æ¸¬
npm run build && npm run preview
# æ·±è‰²æ¨¡å¼åˆ‡æ›æ¸¬è©¦
# éŸ¿æ‡‰å¼æ–·é»æ¸¬è©¦ (320px - 1440px)
```

### 2. ç›¸å®¹æ€§é¢¨éšª
- **Element Plus ç‰ˆæœ¬é–å®š**: package.json å›ºå®šç‰ˆæœ¬
- **CSS ç‰¹ç•°æ€§ç®¡ç†**: ä½¿ç”¨ CSS å±¤ç´š (@layer)
- **æ¼¸é€²å¼éƒ¨ç½²**: æ¯å€‹ Phase ç¨ç«‹é©—è­‰

### 3. ç¶­è­·æ€§é¢¨éšª
- **æ–‡æª”æ›´æ–°**: çµ„ä»¶ä½¿ç”¨æŒ‡å—
- **Lint è¦å‰‡**: ç¦æ­¢æ–°å¢ç¡¬ç·¨ç¢¼é¡è‰²
- **è¨­è¨ˆç³»çµ±å®ˆè­·**: Pre-commit hooks

## æˆåŠŸæŒ‡æ¨™

### é‡åŒ–æŒ‡æ¨™
- âœ… ç¡¬ç·¨ç¢¼é¡è‰²å€¼: 101 â†’ 0
- âœ… CSS è®Šæ•¸è¦†è“‹ç‡: 60% â†’ 95%
- âœ… Element Plus çµ„ä»¶çµ±ä¸€ç‡: 20% â†’ 80%
- âœ… è¨­è¨ˆç³»çµ±ä¸€è‡´æ€§åˆ†æ•¸: 70% â†’ 95%

### è³ªåŒ–æŒ‡æ¨™
- ğŸ¨ è¦–è¦ºä¸€è‡´æ€§: å“ç‰Œè‰²å½©çµ±ä¸€
- ğŸŒ™ æ·±è‰²æ¨¡å¼: å®Œç¾é©é…
- ğŸ“± éŸ¿æ‡‰å¼: æ‰€æœ‰æ–·é»æ­£å¸¸
- âš¡ æ€§èƒ½: CSS æª”æ¡ˆå¤§å° < +10%

## æ™‚ç¨‹è¦åŠƒ

### Week 1: åŸºç¤å»ºè¨­ (1-2 å¤©)
- [ ] è¨­è¨ˆ Token è£œå¼·
- [ ] P0 çµ„ä»¶é‡æ§‹ (AppHeader, UnifiedView, DailyReminderCard)
- [ ] Staging éƒ¨ç½²é©—è­‰

### Week 2: ç³»çµ±æ•´åˆ (2-3 å¤©)  
- [ ] P1 çµ„ä»¶é‡æ§‹ (StarBrightnessIndicator, AppFooter, AnnualFortuneCard)
- [ ] Element Plus Stage 1 æ•´åˆ
- [ ] è¦–è¦ºå›æ­¸æ¸¬è©¦

### Week 3: å®Œå–„å„ªåŒ– (1-2 å¤©)
- [ ] P2 çµ„ä»¶æ¸…ç†
- [ ] Element Plus Stage 2-3 æ•´åˆ
- [ ] æ–‡æª”æ›´æ–° & Lint è¦å‰‡

**ç¸½æ™‚ç¨‹**: 4-7 å¤© (ä¾ä¸¦è¡Œåº¦èª¿æ•´)
