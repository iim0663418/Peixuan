import{d as w,i as M,r as d,j as B,h as S,c as o,a as t,t as e,n as F,e as m,k as R,F as I,l as T,o as a,_ as C}from"./index-BkKrQnZY.js";const U={class:"monitoring-dashboard"},j={class:"dashboard-grid"},q={class:"dashboard-card"},z={key:0,class:"health-status"},E={class:"health-details"},L={key:1,class:"loading"},N={class:"dashboard-card"},O={key:0,class:"memory-stats"},P={class:"memory-item"},V={class:"memory-item"},G={class:"memory-item"},H={class:"memory-usage-bar"},K={class:"usage-text"},A={key:1,class:"loading"},J={class:"dashboard-card"},Q={class:"api-stats"},W={class:"stat-item"},X={class:"stat-label"},Y={class:"stat-value"},Z={class:"stat-item"},x={class:"stat-label"},tt={class:"stat-value"},st={class:"stat-item"},et={class:"stat-label"},ot={class:"stat-value"},at={class:"dashboard-card full-width"},nt={key:0,class:"error-list"},it={class:"error-time"},rt={class:"error-message"},lt={class:"error-path"},ct={key:1,class:"no-errors"},dt={class:"dashboard-actions"},mt=w({__name:"MonitoringDashboard",setup(ht){const{t:f}=M(),n=d(null),i=d(null),h=d([]),u=d({totalRequests:0,avgResponseTime:0,errorRate:0}),p=B(()=>i.value?i.value.memory.heapUsed/i.value.memory.heapTotal*100:0),y=s=>{const l=Math.floor(s/3600),r=Math.floor(s%3600/60),c=Math.floor(s%60);return`${l}h ${r}m ${c}s`},v=s=>{if(s===0)return"0 Bytes";const l=1024,r=["Bytes","KB","MB","GB"],c=Math.floor(Math.log(s)/Math.log(l));return parseFloat((s/Math.pow(l,c)).toFixed(2))+" "+r[c]},g=s=>new Date(s).toLocaleString(),$=async()=>{try{const s=await fetch("/api/v1/health");s.ok&&(n.value=await s.json())}catch(s){console.error("Failed to fetch health data:",s)}},k=async()=>{try{const s=await fetch("/api/v1/metrics");s.ok&&(i.value=await s.json())}catch(s){console.error("Failed to fetch metrics data:",s)}},b=async()=>{h.value=[{id:"1",timestamp:new Date(Date.now()-3e5).toISOString(),message:"Database connection timeout",path:"/api/v1/purple-star"},{id:"2",timestamp:new Date(Date.now()-6e5).toISOString(),message:"Invalid token provided",path:"/api/v1/auth/verify"}]},_=async()=>{await Promise.all([$(),k(),b()])},D=()=>{alert(f("monitoring.export_coming_soon"))};return S(()=>{_(),setInterval(_,3e4)}),(s,l)=>(a(),o("div",U,[t("h1",null,e(s.$t("monitoring.title")),1),t("div",j,[t("div",q,[t("h2",null,e(s.$t("monitoring.health_status")),1),n.value?(a(),o("div",z,[t("div",{class:F(["status-indicator",n.value.status])},e(n.value.status),3),t("div",E,[t("p",null,[t("strong",null,e(s.$t("monitoring.uptime"))+":",1),m(" "+e(y(n.value.uptime)),1)]),t("p",null,[t("strong",null,e(s.$t("monitoring.environment"))+":",1),m(" "+e(n.value.environment),1)]),t("p",null,[t("strong",null,e(s.$t("monitoring.version"))+":",1),m(" "+e(n.value.version),1)]),t("p",null,[t("strong",null,e(s.$t("monitoring.last_check"))+":",1),m(" "+e(g(n.value.timestamp)),1)])])])):(a(),o("div",L,e(s.$t("common.loading")),1))]),t("div",N,[t("h2",null,e(s.$t("monitoring.memory_usage")),1),i.value?(a(),o("div",O,[t("div",P,[t("span",null,e(s.$t("monitoring.heap_used"))+":",1),t("span",null,e(v(i.value.memory.heapUsed)),1)]),t("div",V,[t("span",null,e(s.$t("monitoring.heap_total"))+":",1),t("span",null,e(v(i.value.memory.heapTotal)),1)]),t("div",G,[t("span",null,e(s.$t("monitoring.external"))+":",1),t("span",null,e(v(i.value.memory.external)),1)]),t("div",H,[t("div",{class:"usage-fill",style:R({width:p.value+"%"})},null,4)]),t("div",K,e(p.value.toFixed(1))+"% "+e(s.$t("monitoring.used")),1)])):(a(),o("div",A,e(s.$t("common.loading")),1))]),t("div",J,[t("h2",null,e(s.$t("monitoring.api_performance")),1),t("div",Q,[t("div",W,[t("span",X,e(s.$t("monitoring.total_requests"))+":",1),t("span",Y,e(u.value.totalRequests),1)]),t("div",Z,[t("span",x,e(s.$t("monitoring.avg_response_time"))+":",1),t("span",tt,e(u.value.avgResponseTime)+"ms",1)]),t("div",st,[t("span",et,e(s.$t("monitoring.error_rate"))+":",1),t("span",ot,e(u.value.errorRate)+"%",1)])])]),t("div",at,[t("h2",null,e(s.$t("monitoring.recent_errors")),1),h.value.length>0?(a(),o("div",nt,[(a(!0),o(I,null,T(h.value,r=>(a(),o("div",{key:r.id,class:"error-item"},[t("div",it,e(g(r.timestamp)),1),t("div",rt,e(r.message),1),t("div",lt,e(r.path),1)]))),128))])):(a(),o("div",ct,e(s.$t("monitoring.no_recent_errors")),1))])]),t("div",dt,[t("button",{onClick:_,class:"refresh-btn"},e(s.$t("monitoring.refresh")),1),t("button",{onClick:D,class:"export-btn"},e(s.$t("monitoring.export_logs")),1)])]))}}),vt=C(mt,[["__scopeId","data-v-1e314f0c"]]);export{vt as default};
