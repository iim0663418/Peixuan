# ğŸ”® ä½©ç’‡ã€Œå¤¢å¹»ç¥ç§˜é¢¨ã€å®Œæ•´å¯¦ä½œè¦åŠƒ

**å°ˆæ¡ˆ**: ä½©ç’‡ - æ™ºèƒ½å‘½ç†åˆ†æå¹³å°  
**è¨­è¨ˆé¢¨æ ¼**: å¤¢å¹»ç¥ç§˜é¢¨ï¼ˆæ·±æµ·æ˜Ÿè¾° Ã— é›™é­šåº§äººè¨­ï¼‰  
**è¦åŠƒæ—¥æœŸ**: 2025-12-06  
**é ä¼°ç¸½å·¥æ™‚**: 14-18 å°æ™‚

---

## ğŸ“‹ å·²ç¢ºèªæŠ€è¡“åŸºç¤

### âœ… è¨­è¨ˆç³»çµ±ç¾ç‹€
- **æª”æ¡ˆ**: `bazi-app-vue/src/styles/design-tokens.css`
- **ç¾æœ‰**: å®Œæ•´ CSS è®Šæ•¸ç³»çµ±ï¼ˆé¡è‰²ã€é–“è·ã€å­—é«”ã€é™°å½±ã€åœ“è§’ï¼‰
- **æ·±è‰²ä¸»é¡Œ**: `[data-theme='dark']` å·²å­˜åœ¨
- **æ¼¸è®Šè‰²**: å·²å®šç¾©åŸºç¤æ¼¸è®Šè®Šæ•¸
- **å·¥å…·é¡**: å®Œæ•´çš„ utility classes

### âœ… å‰ç«¯æŠ€è¡“æ£§
- **æ¡†æ¶**: Vue 3 (Composition API) + TypeScript
- **UI åº«**: Element Plus (ç„¡å°ˆé–€ä¸»é¡Œè¦†è“‹æª”æ¡ˆ)
- **åœ–è¡¨**: Chart.js 4.4.9 (æ”¯æ´é›·é”åœ–)
- **Markdown**: marked
- **ç‹€æ…‹**: Pinia
- **è·¯ç”±**: Vue Router 4
- **å­—é«”**: Google Fonts (Noto Sans TC + Inter)

### âœ… ç•¶å‰å¯¦ä½œç‹€æ…‹
- **SSE ä¸²æµ**: EventSource é€æ®µç´¯åŠ ï¼Œç„¡æ‰“å­—æ©Ÿæ•ˆæœ
- **äº”è¡Œåœ–è¡¨**: è‡ªè¨‚ HTML/CSS é•·æ¢åœ–ï¼ˆé Chart.jsï¼‰
- **è¼‰å…¥å‹•ç•«**: ElSkeleton ä½¿ç”¨ 4 è™•
- **ç„¡éšœç¤™**: prefers-reduced-motion å·²æ”¯æ´ 4 å€‹æª”æ¡ˆ

---

## ğŸ¨ è¨­è¨ˆç›®æ¨™

### è¦–è¦ºä¸»é¡Œï¼šæ·±æµ·æ˜Ÿè¾°
- **ä¸»è‰²èª¿**: æ·±è— (#0f1c2c) + æ·±ç´« (#1a0f2e) å¾‘å‘æ¼¸è®Š
- **é«˜äº®è‰²**: æŸ”å’Œç²‰ (#ffb6c1) + æ˜Ÿå…‰ç´« (#a87ffc)
- **æ–‡å­—è‰²**: æœˆå…‰ç™½ (#e6e9f0)
- **ç‰¹æ•ˆ**: Glassmorphism (æ¯›ç»ç’ƒ) + æŸ”å’Œå…‰æšˆ

### äº’å‹•é«”é©—ï¼šç®—å‘½å„€å¼æ„Ÿ
- **æ‰“å­—æ©Ÿæ•ˆæœ**: SSE é€å­—é¡¯ç¤ºï¼ˆ50ms/charï¼‰
- **æ˜Ÿç›¤è¼‰å…¥**: æ›¿ä»£éª¨æ¶å±çš„æ—‹è½‰æ˜Ÿç›¤å‹•ç•«
- **é—œéµè©é«˜äº®**: æ˜Ÿå®¿/ç¥ç…å…‰æšˆæ¨£å¼
- **æ°´æ³¢ç´‹å°èˆª**: Tab å‹•ç•«ä¸‹åŠƒç·š

### æ•¸æ“šè¦–è¦ºåŒ–ï¼šæ˜Ÿç›¤é¢¨æ ¼
- **äº”è¡Œé›·é”åœ–**: æ›¿ä»£é•·æ¢åœ–ï¼ŒåŠé€æ˜æ¼¸è®Šå¡«å……
- **èœ¿èœ’æ™‚é–“è»¸**: å¤§é‹æµå‹•æ„Ÿï¼ˆä¿ç•™ç¾æœ‰å¯¦ä½œï¼‰

---

## ğŸš€ å®Œæ•´å¯¦ä½œè¦åŠƒ

### Phase 1: è¨­è¨ˆç³»çµ±åŸºç¤ (2-3h) â­â­â­

#### Task 1.1: æ–°å¢å¤¢å¹»è‰²ç³»è®Šæ•¸ (30min)
**æª”æ¡ˆ**: `bazi-app-vue/src/styles/design-tokens.css`

**æ–°å¢è®Šæ•¸**:
```css
/* æ·±æµ·æ˜Ÿè¾°è‰²ç³» */
--bg-dark-blue: #0f1c2c;
--bg-dark-purple: #1a0f2e;
--color-pink-soft: #ffb6c1;
--color-accent-glow: #a87ffc;
--color-moonlight: #e6e9f0;

/* Glassmorphism */
--bg-glass-blur: rgba(255, 255, 255, 0.1);
--bg-glass-dark: rgba(15, 28, 44, 0.6);
--shadow-soft-glow: 0 8px 32px rgba(168, 127, 252, 0.15);

/* èƒŒæ™¯å‹•ç•«æ¼¸è®Š */
--gradient-mystic: radial-gradient(circle at 50% 50%, #0f1c2c 0%, #1a0f2e 100%);
```

**æ›´æ–°æ·±è‰²ä¸»é¡Œ**:
```css
[data-theme='dark'] {
  --text-primary: var(--color-moonlight);
  --bg-primary: var(--bg-dark-blue);
  --bg-secondary: var(--bg-dark-purple);
}
```

---

#### Task 1.2: èƒŒæ™¯æ¼¸è®Šå‹•ç•« (1h)
**æª”æ¡ˆ**: `bazi-app-vue/src/App.vue` æˆ–æ–°å»º `MysticBackground.vue`

**å¯¦ä½œå…§å®¹**:
```vue
<template>
  <div class="mystic-background"></div>
</template>

<style scoped>
.mystic-background {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: -1;
  background: var(--gradient-mystic);
  animation: mystic-shift 20s ease-in-out infinite;
}

@keyframes mystic-shift {
  0%, 100% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
}

/* è¡Œå‹•è£ç½®é™ç´š */
@media (max-width: 768px) {
  .mystic-background {
    animation: none;
    background: var(--bg-dark-blue);
  }
}

/* ç„¡éšœç¤™æ”¯æ´ */
@media (prefers-reduced-motion: reduce) {
  .mystic-background {
    animation: none;
  }
}
</style>
```

---

#### Task 1.3: Glassmorphism å¡ç‰‡æ¨£å¼ (1h)
**æª”æ¡ˆ**: `bazi-app-vue/src/styles/design-tokens.css`

**æ–°å¢å·¥å…·é¡**:
```css
/* Glassmorphism å¡ç‰‡ */
.card-glass {
  background: var(--bg-glass-dark);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-soft-glow);
}

/* é™ç´šæ–¹æ¡ˆ */
@supports not (backdrop-filter: blur(10px)) {
  .card-glass {
    background: rgba(15, 28, 44, 0.9);
  }
}
```

**è¦†è“‹ Element Plus ElCard**:
```css
.el-card {
  background: var(--bg-glass-dark) !important;
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.1) !important;
  box-shadow: var(--shadow-soft-glow) !important;
}
```

---

### Phase 2: äº’å‹•å¢å¼· (3-4h) â­â­â­

#### Task 2.1: æ‰“å­—æ©Ÿæ•ˆæœ (2h) ğŸ”„ å·²å¾®èª¿
**æª”æ¡ˆ**: `AIAnalysisView.vue`, `AdvancedAnalysisView.vue`

**ç•¶å‰å¯¦ä½œ**:
```javascript
eventSource.onmessage = (event) => {
  const data = JSON.parse(event.data);
  if (data.text) {
    analysisText.value += data.text; // ç›´æ¥ç´¯åŠ 
  }
};
```

**æ”¹ç‚ºæ‰“å­—æ©Ÿæ•ˆæœ**:
```javascript
let textQueue = '';
let isTyping = false;

eventSource.onmessage = (event) => {
  const data = JSON.parse(event.data);
  if (data.text) {
    textQueue += data.text;
    if (!isTyping) {
      typeWriter();
    }
  }
};

function typeWriter() {
  if (textQueue.length === 0) {
    isTyping = false;
    return;
  }
  
  isTyping = true;
  const char = textQueue[0];
  textQueue = textQueue.slice(1);
  analysisText.value += char;
  
  // ğŸ”„ å¾®èª¿ï¼šæ¨™é»ç¬¦è™Ÿåœé “ï¼ˆæ¨¡æ“¬äººé¡èªé€Ÿï¼‰
  const delay = /[ã€‚,?!;]/.test(char) ? 200 : 50;
  setTimeout(typeWriter, delay);
}
```

**å¾®èª¿èªªæ˜**: å°‡åœé “åˆ¤æ–·å¾ `char === '\n'` æ”¹ç‚ºæ¨™é»ç¬¦è™Ÿ `[ã€‚,?!;]`ï¼Œåœ¨å¥å­çµæŸæ™‚åœé “æ›´è‡ªç„¶ï¼Œæå‡å„€å¼æ„Ÿå’Œæƒ…æ„Ÿå…±é³´ã€‚
```

---

#### Task 2.2: è¼¸å…¥æ¡†å…‰æšˆæ•ˆæœ (1h)
**æª”æ¡ˆ**: æ–°å»º `bazi-app-vue/src/styles/element-plus-custom.scss`

```scss
// è¼¸å…¥æ¡†èšç„¦å…‰æšˆ
.el-input__wrapper {
  transition: all var(--transition-normal);
  
  &:focus-within {
    box-shadow: 0 0 0 2px var(--color-accent-glow),
                0 0 20px rgba(168, 127, 252, 0.3);
    border-color: var(--color-accent-glow);
  }
}

// æ—¥æœŸé¸æ“‡å™¨
.el-date-picker {
  background: var(--bg-glass-dark);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.1);
}
```

---

#### Task 2.3: Tab æ°´æ³¢ç´‹å‹•ç•« (1h)
**æª”æ¡ˆ**: `element-plus-custom.scss`

```scss
.el-tabs__active-bar {
  background: linear-gradient(
    90deg,
    transparent 0%,
    var(--color-accent-glow) 50%,
    transparent 100%
  );
  height: 3px;
  animation: wave-flow 2s ease-in-out infinite;
}

@keyframes wave-flow {
  0%, 100% { transform: scaleX(1); }
  50% { transform: scaleX(1.1); }
}
```

---

### Phase 3: è¦–è¦ºç‰¹æ•ˆ (4-5h) â­â­

#### Task 3.1: æ˜Ÿç›¤è¼‰å…¥å‹•ç•« (2h) ğŸ”„ å·²å¾®èª¿
**æª”æ¡ˆ**: æ–°å»º `bazi-app-vue/src/components/StarSpinnerLoading.vue`

**é¸é … A: ç´” CSS æ˜Ÿç›¤å‹•ç•«** (æ¨è–¦ï¼Œä¸»æ–¹æ¡ˆ)
**é¸é … B: Lottie å‹•ç•«** (å¯é¸å¢å¼·ï¼Œè¦–è¦ºæ•ˆæœæ›´è±å¯Œä¸”æ€§èƒ½ç©©å®š)

**å¾®èª¿èªªæ˜**: ä¿æŒç´” CSS ç‚ºä¸»æ–¹æ¡ˆï¼Œä½†å»ºè­°é ç®—å…è¨±æ™‚è€ƒæ…® Lottieï¼Œå› å…¶åœ¨ä¸åŒè¨­å‚™ä¸Šçš„æ€§èƒ½å’Œè¦–è¦ºç´°ç¯€æ›´ç©©å®šã€‚
```vue
<template>
  <div class="star-spinner">
    <div class="orbit" v-for="i in 3" :key="i"></div>
    <div class="center-star">âœ¨</div>
  </div>
</template>

<style scoped>
.star-spinner {
  position: relative;
  width: 100px;
  height: 100px;
}

.orbit {
  position: absolute;
  border: 2px solid var(--color-accent-glow);
  border-radius: 50%;
  opacity: 0.3;
  animation: orbit-spin 3s linear infinite;
}

.orbit:nth-child(1) {
  width: 100%;
  height: 100%;
  animation-duration: 3s;
}

.orbit:nth-child(2) {
  width: 70%;
  height: 70%;
  top: 15%;
  left: 15%;
  animation-duration: 2s;
  animation-direction: reverse;
}

.orbit:nth-child(3) {
  width: 40%;
  height: 40%;
  top: 30%;
  left: 30%;
  animation-duration: 1.5s;
}

@keyframes orbit-spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

.center-star {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 24px;
  animation: pulse 1.5s ease-in-out infinite;
}

@keyframes pulse {
  0%, 100% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
  50% { opacity: 0.6; transform: translate(-50%, -50%) scale(1.2); }
}

@media (prefers-reduced-motion: reduce) {
  .orbit, .center-star {
    animation: none;
  }
}
</style>
```

**é¸é … B: Lottie å‹•ç•«** (éœ€å¼•å…¥åº«)
- å®‰è£: `npm install lottie-web`
- Bundle size: ~56KB (gzipped)

---

#### Task 3.2: é—œéµè©é«˜äº® (1.5h) ğŸ”„ å·²å¾®èª¿
**æª”æ¡ˆ**: `AIAnalysisView.vue`, `AdvancedAnalysisView.vue`, `design-tokens.css`

**åŸæ–¹æ¡ˆ**: å‰ç«¯ä½¿ç”¨ JS `highlightKeywords()` è™•ç†å¾Œè¿½åŠ åˆ° `analysisText.value`

**å¾®èª¿æ–¹æ¡ˆ**: å¾Œç«¯ Markdown + CSS æ¨£å¼æ•´åˆ
1. **å¾Œç«¯**: Gemini prompt æŒ‡ç¤ºå°‡é—œéµè©åŒ…è£¹ç‚º `**é—œéµè©**`
2. **å‰ç«¯**: `marked` è‡ªå‹•æ¸²æŸ“ç‚º `<strong>é—œéµè©</strong>`
3. **CSS**: å®šç¾© `.markdown strong` å…‰æšˆæ¨£å¼

**å„ªå‹¢**: é¿å…å‰ç«¯é »ç¹æ­£å‰‡è¡¨é”å¼æ›¿æ›ï¼Œæé«˜æ•ˆèƒ½ä¸¦ç°¡åŒ–é‚è¼¯ï¼Œè®“é«˜äº®æ¨£å¼èˆ‡ CSS/marked æ›´ç·Šå¯†çµåˆã€‚

**å¯¦ä½œ**:

**å¾Œç«¯** (`peixuan-worker/src/services/geminiService.ts`):
```typescript
// åœ¨ prompt ä¸­æ–°å¢æŒ‡ç¤º
"è«‹å°‡é—œéµè¡“èªï¼ˆå¦‚å‘½å®®ã€è²¡å¸›å®®ã€ç´«å¾®ã€åŒ–ç¥¿ç­‰ï¼‰ä»¥ **ç²—é«”** æ¨™è¨˜ä»¥å¼·èª¿é‡é»ã€‚"
```

**å‰ç«¯** (`bazi-app-vue/src/styles/design-tokens.css`):
```css
.markdown strong {
  color: var(--color-accent-glow);
  font-weight: var(--font-weight-semibold);
  text-shadow: 0 0 10px rgba(168, 127, 252, 0.5);
  padding: 0 2px;
}
```

**ç§»é™¤**: å‰ç«¯ `highlightKeywords()` å‡½æ•¸ï¼ˆå¦‚å­˜åœ¨ï¼‰

---

#### Task 3.3: äº”è¡Œé›·é”åœ–é‡æ§‹ (1.5h)
**æª”æ¡ˆ**: `bazi-app-vue/src/components/WuXingChart.vue`

**ç•¶å‰**: è‡ªè¨‚ HTML/CSS é•·æ¢åœ–  
**ç›®æ¨™**: Chart.js é›·é”åœ–

```vue
<template>
  <div class="wuxing-chart">
    <canvas ref="chartCanvas"></canvas>
  </div>
</template>

<script setup lang="ts">
import { ref, onMounted, watch } from 'vue';
import { Chart, RadarController, RadialLinearScale, PointElement, LineElement, Filler } from 'chart.js';

Chart.register(RadarController, RadialLinearScale, PointElement, LineElement, Filler);

const props = defineProps<{
  distribution: {
    æœ¨: number;
    ç«: number;
    åœŸ: number;
    é‡‘: number;
    æ°´: number;
  };
}>();

const chartCanvas = ref<HTMLCanvasElement | null>(null);
let chartInstance: Chart | null = null;

onMounted(() => {
  if (!chartCanvas.value) return;
  
  chartInstance = new Chart(chartCanvas.value, {
    type: 'radar',
    data: {
      labels: ['æœ¨', 'ç«', 'åœŸ', 'é‡‘', 'æ°´'],
      datasets: [{
        label: 'äº”è¡Œèƒ½é‡',
        data: [
          props.distribution.æœ¨,
          props.distribution.ç«,
          props.distribution.åœŸ,
          props.distribution.é‡‘,
          props.distribution.æ°´
        ],
        backgroundColor: 'rgba(168, 127, 252, 0.2)',
        borderColor: 'var(--color-accent-glow)',
        borderWidth: 2,
        pointBackgroundColor: 'var(--color-accent-glow)',
        pointBorderColor: '#fff',
        pointHoverBackgroundColor: '#fff',
        pointHoverBorderColor: 'var(--color-accent-glow)'
      }]
    },
    options: {
      responsive: true,
      maintainAspectRatio: true,
      scales: {
        r: {
          beginAtZero: true,
          ticks: {
            color: 'var(--text-tertiary)',
            backdropColor: 'transparent'
          },
          grid: {
            color: 'rgba(255, 255, 255, 0.1)'
          },
          pointLabels: {
            color: 'var(--text-primary)',
            font: {
              size: 14,
              weight: 'bold'
            }
          }
        }
      },
      plugins: {
        legend: {
          display: false
        }
      }
    }
  });
});
</script>
```

---

### Phase 4: Element Plus ä¸»é¡Œ (2h) â­â­

#### Task 4.1: å»ºç«‹ä¸»é¡Œè¦†è“‹æª”æ¡ˆ (1h) ğŸ”„ å·²å¾®èª¿
**æª”æ¡ˆ**: æ–°å»º `bazi-app-vue/src/styles/element-plus-custom.scss`

```scss
// ä¸»è‰²èª¿è¦†è“‹
:root {
  --el-color-primary: var(--color-accent-glow);
  --el-color-primary-light-3: rgba(168, 127, 252, 0.7);
  --el-color-primary-light-5: rgba(168, 127, 252, 0.5);
  --el-color-primary-light-7: rgba(168, 127, 252, 0.3);
  --el-color-primary-light-9: rgba(168, 127, 252, 0.1);
  
  --el-border-radius-base: var(--radius-md);
  --el-border-radius-small: var(--radius-sm);
  
  --el-fill-color-blank: var(--bg-glass-dark);
  --el-bg-color: var(--bg-dark-blue);
  --el-bg-color-overlay: var(--bg-glass-dark);
}

// ğŸ”„ å¾®èª¿ï¼šç¢ºä¿è¦†è“‹å±¤çµ„ä»¶ï¼ˆå½ˆçª—ã€é€šçŸ¥ï¼‰ä¹Ÿå¥—ç”¨ Glassmorphism
.el-dialog,
.el-notification,
.el-message-box {
  background: var(--bg-glass-dark) !important;
  backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.1);
  box-shadow: var(--shadow-soft-glow);
}

@media (prefers-reduced-motion: reduce) {
  .el-dialog,
  .el-notification,
  .el-message-box {
    backdrop-filter: none;
    background: var(--bg-primary) !important;
  }
}
```

**å¾®èª¿èªªæ˜**: æ–°å¢ `.el-dialog`ã€`.el-notification`ã€`.el-message-box` çš„ Glassmorphism è¦†è“‹ï¼Œç¢ºä¿å½ˆçª—ã€é€šçŸ¥ç­‰ã€Œè¦†è“‹å±¤ã€çµ„ä»¶ä¹Ÿç¬¦åˆå¤¢å¹»ç¥ç§˜é¢¨æ ¼ã€‚

**åœ¨ main.ts ä¸­å¼•å…¥**:
```typescript
import './styles/element-plus-custom.scss';
```

---

#### Task 4.2: çµ„ä»¶æ¨£å¼å¾®èª¿ (1h)
**æª”æ¡ˆ**: `element-plus-custom.scss`

```scss
// æŒ‰éˆ•æ¼¸è®Š
.el-button--primary {
  background: linear-gradient(135deg, var(--color-accent-glow), var(--color-pink-soft));
  border: none;
  
  &:hover {
    background: linear-gradient(135deg, var(--color-pink-soft), var(--color-accent-glow));
    box-shadow: 0 0 20px rgba(168, 127, 252, 0.5);
  }
}

// å¡ç‰‡æ¯›ç»ç’ƒ
.el-card {
  background: var(--bg-glass-dark) !important;
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.1) !important;
}

// ä¸‹æ‹‰é¸å–®
.el-select-dropdown {
  background: var(--bg-glass-dark);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.1);
}
```

---

### Phase 5: æ•ˆèƒ½å„ªåŒ– (1-2h) â­â­

#### Task 5.1: éŸ¿æ‡‰å¼ç‰¹æ•ˆé™ç´š (1h)
**æª”æ¡ˆ**: `design-tokens.css` æˆ–å„çµ„ä»¶

```css
/* è¡Œå‹•è£ç½®é™ç´š */
@media (max-width: 768px) {
  .mystic-background {
    animation: none;
    background: var(--bg-dark-blue);
  }
  
  .card-glass {
    backdrop-filter: none;
    background: rgba(15, 28, 44, 0.95);
  }
  
  .shadow-soft-glow {
    box-shadow: var(--shadow-sm);
  }
}
```

---

#### Task 5.2: ç„¡éšœç¤™æ”¯æ´æ“´å±• (1h)
**æª”æ¡ˆ**: æ‰€æœ‰æ–°å¢å‹•ç•«çš„çµ„ä»¶

```css
@media (prefers-reduced-motion: reduce) {
  .mystic-background,
  .star-spinner .orbit,
  .star-spinner .center-star,
  .el-tabs__active-bar {
    animation: none !important;
  }
  
  * {
    transition: none !important;
  }
}
```

---

### Phase 6: ä¸»é¡Œåˆ‡æ› (å¯é¸, 2h) â­

#### Task 6.1: ä¸»é¡Œåˆ‡æ›å™¨ (1h)
**æª”æ¡ˆ**: æ–°å»º `bazi-app-vue/src/components/ThemeToggle.vue`

```vue
<template>
  <button @click="toggleTheme" class="theme-toggle" :aria-label="themeLabel">
    <span v-if="isDark">ğŸŒ™</span>
    <span v-else>â˜€ï¸</span>
  </button>
</template>

<script setup lang="ts">
import { ref, computed, onMounted } from 'vue';

const isDark = ref(true);

const themeLabel = computed(() => 
  isDark.value ? 'åˆ‡æ›åˆ°æ·ºè‰²æ¨¡å¼' : 'åˆ‡æ›åˆ°æ·±è‰²æ¨¡å¼'
);

function toggleTheme() {
  isDark.value = !isDark.value;
  document.documentElement.setAttribute(
    'data-theme',
    isDark.value ? 'dark' : 'light'
  );
  localStorage.setItem('theme', isDark.value ? 'dark' : 'light');
}

onMounted(() => {
  const savedTheme = localStorage.getItem('theme') || 'dark';
  isDark.value = savedTheme === 'dark';
  document.documentElement.setAttribute('data-theme', savedTheme);
});
</script>
```

---

#### Task 6.2: æ·ºè‰²æ¨¡å¼è®Šæ•¸ (1h)
**æª”æ¡ˆ**: `design-tokens.css`

```css
[data-theme='light'] {
  --text-primary: #2c3e50;
  --text-secondary: #6c757d;
  
  --bg-primary: #fdfbfb;
  --bg-secondary: #ffffff;
  --bg-glass-blur: rgba(255, 255, 255, 0.7);
  
  --shadow-soft-glow: 0 8px 32px rgba(168, 127, 252, 0.2);
}
```

---

## ğŸ”„ å¾®èª¿è¨˜éŒ„ (2025-12-06)

### å·²æ•´åˆçš„ä½¿ç”¨è€…å»ºè­°

#### 1. Task 2.1 - æ‰“å­—æ©Ÿé‚è¼¯å„ªåŒ–
- **åŸæ–¹æ¡ˆ**: åƒ…åœ¨æ›è¡Œ (`\n`) æ™‚åœé “ 200ms
- **å¾®èª¿**: æ”¹ç‚ºæ¨™é»ç¬¦è™Ÿ (`[ã€‚,?!;]`) åœé “ 200ms
- **åŸå› **: æ¨¡æ“¬äººé¡èªé€Ÿï¼Œåœ¨å¥å­çµæŸæ™‚åœé “æ›´è‡ªç„¶ï¼Œæå‡å„€å¼æ„Ÿå’Œæƒ…æ„Ÿå…±é³´

#### 2. Task 3.1 - æ˜Ÿç›¤è¼‰å…¥å‹•ç•«ç­–ç•¥
- **åŸæ–¹æ¡ˆ**: ç´” CSS æ–¹æ¡ˆï¼ˆæ¨è–¦ï¼‰
- **å¾®èª¿**: ä¿æŒ CSS ç‚ºä¸»æ–¹æ¡ˆï¼Œä½†å»ºè­°é ç®—å…è¨±æ™‚è€ƒæ…® Lottie
- **åŸå› **: Lottie åœ¨ä¸åŒè¨­å‚™ä¸Šçš„ CPU æ¶ˆè€—å’Œè¦–è¦ºç´°ç¯€æ›´ç©©å®šï¼Œä½† CSS ä»ç‚ºå¯é å‚™æ¡ˆ

#### 3. Task 3.2 - é—œéµè©é«˜äº®æ•´åˆç­–ç•¥
- **åŸæ–¹æ¡ˆ**: å‰ç«¯ JS `highlightKeywords()` æ­£å‰‡è¡¨é”å¼æ›¿æ›
- **å¾®èª¿**: å¾Œç«¯ Markdown `**é—œéµè©**` + CSS `.markdown strong` æ¨£å¼
- **åŸå› **: é¿å… Vue éŸ¿æ‡‰å¼æ•¸æ“šä¸­é »ç¹æ­£å‰‡æ›¿æ›ï¼Œæé«˜æ•ˆèƒ½ä¸¦ç°¡åŒ–é‚è¼¯ï¼Œèˆ‡ marked æ›´ç·Šå¯†æ•´åˆ

#### 4. Task 4.1 - Element Plus è¦†è“‹å±¤å®Œæ•´æ€§
- **åŸæ–¹æ¡ˆ**: åƒ…è¦†è“‹ `--el-bg-color-overlay` è®Šæ•¸
- **å¾®èª¿**: æ–°å¢ `.el-dialog`ã€`.el-notification`ã€`.el-message-box` å–®ç¨è¦†è“‹
- **åŸå› **: ç¢ºä¿å½ˆçª—ã€é€šçŸ¥ç­‰ã€Œè¦†è“‹å±¤ã€çµ„ä»¶ä¹Ÿå¥—ç”¨ Glassmorphismï¼Œç¬¦åˆå¤¢å¹»ç¥ç§˜é¢¨æ ¼

---

## ğŸ“Š å·¥æ™‚ä¼°ç®—èˆ‡å„ªå…ˆç´š

| Phase | ä»»å‹™æ•¸ | é ä¼°å·¥æ™‚ | å„ªå…ˆç´š | ç‹€æ…‹ |
|-------|--------|---------|--------|------|
| Phase 1: è¨­è¨ˆç³»çµ±åŸºç¤ | 3 | 2-3h | â­â­â­ High | å¾…åŸ·è¡Œ |
| Phase 2: äº’å‹•å¢å¼· | 3 | 3-4h | â­â­â­ High | å¾…åŸ·è¡Œ |
| Phase 3: è¦–è¦ºç‰¹æ•ˆ | 3 | 4-5h | â­â­ Medium | å¾…åŸ·è¡Œ |
| Phase 4: Element Plus ä¸»é¡Œ | 2 | 2h | â­â­ Medium | å¾…åŸ·è¡Œ |
| Phase 5: æ•ˆèƒ½å„ªåŒ– | 2 | 1-2h | â­â­ Medium | å¾…åŸ·è¡Œ |
| Phase 6: ä¸»é¡Œåˆ‡æ› (å¯é¸) | 2 | 2h | â­ Low | å¯é¸ |
| **ç¸½è¨ˆ** | **15** | **14-18h** | - | - |

---

## ğŸ¯ å»ºè­°åŸ·è¡Œé †åº

### ä»Šæ—¥ç«‹å³åŸ·è¡Œ (3.5h):
1. âœ… **Task 1.1**: æ–°å¢å¤¢å¹»è‰²ç³»è®Šæ•¸ (30min)
2. âœ… **Task 1.3**: Glassmorphism å¡ç‰‡ (1h)
3. âœ… **Task 2.1**: æ‰“å­—æ©Ÿæ•ˆæœ (2h)

### æ˜æ—¥åŸ·è¡Œ (4h):
4. **Task 4.1**: æ–°å»º Element Plus ä¸»é¡Œæª”æ¡ˆ (1h)
5. **Task 1.2**: èƒŒæ™¯æ¼¸è®Šå‹•ç•« (1h)
6. **Task 2.2-2.3**: è¼¸å…¥æ¡†å…‰æšˆ + Tab æ°´æ³¢ç´‹ (2h)

### å¾ŒçºŒåŸ·è¡Œ (6-8h):
7. **Task 3.3**: äº”è¡Œé›·é”åœ–é‡æ§‹ (3h) âš ï¸ å·¥ä½œé‡è¼ƒå¤§
8. **Task 3.1**: æ˜Ÿç›¤è¼‰å…¥å‹•ç•« (2h)
9. **Task 3.2**: é—œéµè©é«˜äº® (1.5h)
10. **Task 5.1-5.2**: æ•ˆèƒ½å„ªåŒ– (2h)

---

## âš ï¸ é¢¨éšªèˆ‡æ³¨æ„äº‹é …

### é«˜é¢¨éšªé …ç›®
1. **Task 3.3 (äº”è¡Œé›·é”åœ–)**: éœ€å®Œå…¨é‡æ§‹ç¾æœ‰çµ„ä»¶
   - å›æ»¾æ–¹æ¡ˆ: ä¿ç•™ `.legacy.vue` å‚™ä»½
   - æ¸¬è©¦: ç¢ºä¿è³‡æ–™æ ¼å¼ç›¸å®¹

2. **Task 2.1 (æ‰“å­—æ©Ÿæ•ˆæœ)**: å¯èƒ½å½±éŸ¿ SSE æ•ˆèƒ½
   - é™ç´šæ–¹æ¡ˆ: æä¾›ã€Œè·³éå‹•ç•«ã€æŒ‰éˆ•
   - æ¸¬è©¦: é•·æ–‡æœ¬æ¸²æŸ“æ•ˆèƒ½

### ä¸­é¢¨éšªé …ç›®
1. **Task 1.3 (Glassmorphism)**: ç€è¦½å™¨ç›¸å®¹æ€§
   - é™ç´šæ–¹æ¡ˆ: `@supports` æª¢æ¸¬ + ç´”è‰²èƒŒæ™¯
   - æ¸¬è©¦: Safari/Firefox/Chrome

2. **Task 4.1 (Element Plus ä¸»é¡Œ)**: å¯èƒ½å½±éŸ¿ç¾æœ‰æ¨£å¼
   - å›æ»¾æ–¹æ¡ˆ: Git é‚„åŸ
   - æ¸¬è©¦: æ‰€æœ‰ä½¿ç”¨ Element Plus çš„é é¢

### æ•ˆèƒ½è€ƒé‡
- **è¡Œå‹•è£ç½®**: é—œé–‰èƒŒæ™¯å‹•ç•«ã€ç§»é™¤ backdrop-filter
- **ç„¡éšœç¤™**: æ‰€æœ‰å‹•ç•«æ”¯æ´ prefers-reduced-motion
- **Bundle Size**: Lottie å¯é¸ï¼ˆ+56KBï¼‰ï¼Œå„ªå…ˆç´” CSS

---

### ğŸ”„ RWD é©é…é¢¨éšªèˆ‡è§£æ±ºæ–¹æ¡ˆ

| å¯¦ä½œé …ç›® | æ½›åœ¨å½±éŸ¿ | è§£æ±ºæ–¹æ¡ˆ (å·²åœ¨è¦åŠƒä¸­) |
|---------|---------|---------------------|
| **Glassmorphism æ€§èƒ½** | `backdrop-filter` (æ¯›ç»ç’ƒ) åœ¨èˆŠç‰ˆ/ä½æ€§èƒ½æ‰‹æ©Ÿä¸Šå¯èƒ½å°è‡´å¡é “ | **Task 5.1 & 5.2**: é€²è¡Œè¡Œå‹•è£ç½®é™ç´šå’Œ `@supports` æª¢æ¸¬ã€‚åœ¨ `@media (max-width: 768px)` æ–·é»ä¸‹ï¼Œç§»é™¤ `backdrop-filter`ï¼Œä¸¦å°‡å¡ç‰‡èƒŒæ™¯è¨­ç½®ç‚ºä¸é€æ˜åº¦æ›´é«˜çš„ç´”è‰² (`rgba(15, 28, 44, 0.95)`)ã€‚ |
| **èƒŒæ™¯æ¼¸è®Šå‹•ç•«** | `@keyframes mystic-shift` é‹è¡ŒæœƒæŒçºŒæ¶ˆè€—æ‰‹æ©Ÿ CPU/GPU è³‡æº | **Task 1.2 & 5.1**: åœ¨ Mobile æ–·é»ä¸‹ï¼Œä½¿ç”¨ `@media` å®Œå…¨é—œé–‰å‹•ç•« (`animation: none;`)ï¼Œåªä¿ç•™éœæ…‹çš„æ·±è—è‰²èƒŒæ™¯ (`var(--bg-dark-blue)`)ã€‚ |
| **åœ–è¡¨é‡æ§‹** | Task 3.3 (é›·é”åœ–)ï¼šChart.js åœ–è¡¨åœ¨å°è¢å¹•ä¸Šå¯èƒ½è®Šå½¢æˆ–é›£ä»¥é–±è®€ | **Chart.js é…ç½®**: ç¢ºä¿ Chart.js çš„ `options` è¨­ç½® `responsive: true` å’Œ `maintainAspectRatio: true`ï¼Œä¸¦å¯èƒ½éœ€è¦åœ¨ Mobile æ–·é»ä¸‹ç¸®å°åœ–è¡¨å­—é«”å¤§å° (`pointLabels` çš„ `font.size`)ã€‚ |
| **è§¸æ§å„ªåŒ–** | æ–°å¢çš„è¼¸å…¥æ¡†å…‰æšˆï¼ˆTask 2.2ï¼‰å’Œ Tab æ°´æ³¢ç´‹ï¼ˆTask 2.3ï¼‰æ˜¯å¦æœƒå½±éŸ¿ 44px æœ€å°è§¸æ§ç›®æ¨™ | **CSS å¯©æ ¸**: âœ… ç„¡éœ€æ“”å¿ƒã€‚é€™äº›æ•ˆæœéƒ½æ˜¯æ¨£å¼å±¤æ¬¡çš„ `box-shadow` æˆ– `::after` å½å…ƒç´ å‹•ç•«ï¼Œä¸æœƒæ”¹è®ŠæŒ‰éˆ•å’Œè¼¸å…¥æ¡†æœ¬èº«çš„é»æ“Šå€åŸŸå¤§å°ã€‚ |

---

## ğŸ“ æ¸¬è©¦æª¢æŸ¥æ¸…å–®

### è¦–è¦ºæ¸¬è©¦
- [ ] æ·±è‰²ä¸»é¡Œé¡è‰²æ­£ç¢º
- [ ] Glassmorphism æ•ˆæœæ­£å¸¸
- [ ] èƒŒæ™¯æ¼¸è®Šå‹•ç•«æµæš¢
- [ ] æ‰€æœ‰å¡ç‰‡æ¨£å¼ä¸€è‡´

### äº’å‹•æ¸¬è©¦
- [ ] æ‰“å­—æ©Ÿæ•ˆæœæµæš¢ï¼ˆç„¡å¡é “ï¼‰
- [ ] è¼¸å…¥æ¡†èšç„¦å…‰æšˆæ­£å¸¸
- [ ] Tab åˆ‡æ›å‹•ç•«æ­£å¸¸
- [ ] é—œéµè©é«˜äº®æ­£ç¢º

### ç›¸å®¹æ€§æ¸¬è©¦
- [ ] Chrome/Edge æœ€æ–°ç‰ˆ
- [ ] Firefox æœ€æ–°ç‰ˆ
- [ ] Safari æœ€æ–°ç‰ˆ
- [ ] è¡Œå‹•è£ç½® (iOS/Android)

### æ•ˆèƒ½æ¸¬è©¦
- [ ] è¡Œå‹•è£ç½®å‹•ç•«é™ç´š
- [ ] prefers-reduced-motion ç”Ÿæ•ˆ
- [ ] é•·æ–‡æœ¬æ‰“å­—æ©Ÿæ•ˆèƒ½
- [ ] é›·é”åœ–æ¸²æŸ“æ•ˆèƒ½

### ç„¡éšœç¤™æ¸¬è©¦
- [ ] éµç›¤å°èˆªæ­£å¸¸
- [ ] ARIA å±¬æ€§å®Œæ•´
- [ ] è‰²å½©å°æ¯”åº¦ç¬¦åˆ WCAG AA
- [ ] è¢å¹•é–±è®€å™¨ç›¸å®¹

---

## ğŸ“š åƒè€ƒè³‡æº

### è¨­è¨ˆéˆæ„Ÿ
- Glassmorphism: https://glassmorphism.com/
- ç¥ç§˜å­¸ç¶²ç«™: Astro.com, Co-Star, The Pattern

### æŠ€è¡“æ–‡ä»¶
- Chart.js Radar: https://www.chartjs.org/docs/latest/charts/radar.html
- Element Plus ä¸»é¡Œ: https://element-plus.org/en-US/guide/theming.html
- CSS backdrop-filter: https://developer.mozilla.org/en-US/docs/Web/CSS/backdrop-filter

### ç„¡éšœç¤™æ¨™æº–
- WCAG 2.1: https://www.w3.org/WAI/WCAG21/quickref/
- prefers-reduced-motion: https://developer.mozilla.org/en-US/docs/Web/CSS/@media/prefers-reduced-motion

---

## ğŸ”„ å›æ»¾ç­–ç•¥

### Git åˆ†æ”¯ç­–ç•¥
```
feature/mystic-design â†’ staging â†’ main
```

### å‚™ä»½ç­–ç•¥
- æ‰€æœ‰é‡æ§‹çµ„ä»¶ä¿ç•™ `.legacy.vue` å‚™ä»½
- ä½¿ç”¨ Feature Flag æ§åˆ¶æ–°æ¨£å¼å•Ÿç”¨

### å›æ»¾æŒ‡ä»¤
```bash
# å›æ»¾å–®ä¸€æª”æ¡ˆ
git checkout HEAD -- <file>

# å›æ»¾æ•´å€‹ feature åˆ†æ”¯
git reset --hard origin/main
```

---

**è¦åŠƒå®Œæˆæ—¥æœŸ**: 2025-12-06  
**é è¨ˆé–‹å§‹æ—¥æœŸ**: 2025-12-06  
**é è¨ˆå®Œæˆæ—¥æœŸ**: 2025-12-08 (2-3 å¤©)
EOF
"
